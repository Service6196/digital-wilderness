---
interface Props {
  title: string;
  color?: string;
  height?: string; // Tailwind h- class
}

const { title, color = '#595045', height = 'h-64' } = Astro.props;

// Is color light? Simplified check for text contrast
const isLight = (hex: string) => {
    // Very basic check, detailed implementation would do hex->rgb->luminance
    const r = parseInt(hex.slice(1, 3), 16);
    const g = parseInt(hex.slice(3, 5), 16);
    const b = parseInt(hex.slice(5, 7), 16);
    return (r * 0.299 + g * 0.587 + b * 0.114) > 186;
}

const textColor = isLight(color) ? 'text-stone-800' : 'text-stone-100';
---

<div 
  class={`book-spine relative flex items-center justify-center p-2 rounded-sm shadow-sm transition-transform hover:-translate-y-2 hover:shadow-md cursor-pointer ${height}`}
  style={`background-color: ${color}; writing-mode: vertical-rl; text-orientation: mixed;`}
  title={title}
>
  <!-- Spine Texture/Curve Overlay -->
  <div class="absolute inset-0 bg-gradient-to-r from-black/20 via-transparent to-black/20 pointer-events-none rounded-sm"></div>
  
  <span class={`font-serif font-medium tracking-wide text-sm truncate max-h-[90%] ${textColor}`}>
    {title}
  </span>
</div>

<style>
    .book-spine {
        /* Default width if flex doesn't handle it well */
        min-width: 28px; 
    }
</style>
