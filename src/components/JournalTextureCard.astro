---
const { title, category, image = "/images/hero-desk.png", href, pubDate } = Astro.props;

// Format date
const dateStr = pubDate ? new Date(pubDate).toLocaleDateString('zh-CN', { month: 'long', year: 'numeric' }) : '';
---

<a href={href} class="group relative block w-full aspect-[4/5] md:aspect-[3/4] overflow-hidden rounded-[var(--radius-lg)] bg-[var(--bg-subtle)] hover:shadow-xl transition-all duration-500">
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
        <img 
            src={image} 
            alt={title}
            class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0 opacity-80 group-hover:opacity-100"
            loading="lazy"
        />
        <!-- Noise Overlay -->
        <div class="absolute inset-0 bg-neutral-900/40 group-hover:bg-neutral-900/20 transition-colors duration-500"></div>
        <div class="absolute inset-0 opacity-[0.15] mix-blend-overlay" style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E');"></div>
    </div>

    <!-- Content Overlay -->
    <div class="absolute inset-0 z-10 flex flex-col justify-end p-6 md:p-8">
        
        <!-- Top Decoration -->
        <div class="absolute top-6 right-6">
            <div class="w-8 h-8 rounded-full border border-white/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-2 group-hover:translate-y-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="text-white w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg>
            </div>
        </div>

        <div class="transform transition-transform duration-500 group-hover:-translate-y-2">
            <!-- Meta -->
            <div class="flex items-center gap-3 font-mono text-xs text-white/70 uppercase tracking-widest mb-3">
                <span>{category}</span>
                {dateStr && <span class="w-1 h-1 bg-white/50 rounded-full"></span>}
                {dateStr && <span>{dateStr}</span>}
            </div>

            <!-- Title -->
            <h3 class="text-2xl md:text-3xl font-serif text-white font-medium leading-tight mb-2 group-hover:text-[var(--accent)] transition-colors">
                {title}
            </h3>
            
            <!-- Abstract/Hint (Optional, keeps card clean) -->
            <div class="h-0 overflow-hidden group-hover:h-auto group-hover:mt-2 transition-all duration-300">
                <p class="text-sm text-white/80 line-clamp-2 font-sans leading-relaxed opacity-0 group-hover:opacity-100 transition-opacity delay-100 duration-500">
                    Click to read more &rarr;
                </p>
            </div>
        </div>
    </div>
</a>
