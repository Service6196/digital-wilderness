---
import BaseLayout from '../layouts/BaseLayout.astro';
import Footer from '../components/Footer.astro';
import ToolCard from '../components/stack/ToolCard.astro';
import { getCollection } from 'astro:content';

const stackItems = await getCollection('stack');

// Filter for Software and Hardware only for the /uses page
const usesItems = stackItems.filter(item => 
    item.data.type === 'Software' || item.data.type === 'Hardware'
);

const groups = {
    Software: usesItems.filter(item => item.data.type === 'Software'),
    Hardware: usesItems.filter(item => item.data.type === 'Hardware'),
};

const title = "Uses | Digital Wilderness";
const description = "A curated list of the software and hardware I use daily.";
---

<BaseLayout title={title} description={description}>
    
    <main class="min-h-screen pt-32 px-[max(5vw,20px)]">
        
        <header class="mb-24 max-w-2xl">
            <h1 class="font-serif text-[clamp(3.5rem,8vw,5rem)] leading-none italic text-[var(--text)] mb-6">
                Uses
            </h1>
            <p class="font-sans text-lg text-[var(--text-secondary)] leading-relaxed opacity-80">
                The tools and hardware that power my workflow.
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-16 mb-32">
            
            <!-- Software Column -->
            <div class="md:col-span-1">
                <h2 class="font-mono text-xs uppercase tracking-widest text-[var(--text-muted)] mb-8 pb-4 border-b border-[var(--grid-line)]">
                    Software
                </h2>
                <div class="space-y-4">
                    {groups.Software.length > 0 ? (
                        groups.Software.map(item => (
                            <ToolCard item={item} />
                        ))
                    ) : (
                        <p class="text-[var(--text-muted)] italic">Nothing added yet.</p>
                    )}
                </div>
            </div>

            <!-- Hardware Column -->
            <div class="md:col-span-1">
                <h2 class="font-mono text-xs uppercase tracking-widest text-[var(--text-muted)] mb-8 pb-4 border-b border-[var(--grid-line)]">
                    Hardware
                </h2>
                <div class="space-y-4">
                    {groups.Hardware.length > 0 ? (
                        groups.Hardware.map(item => (
                            <ToolCard item={item} />
                        ))
                    ) : (
                        <p class="text-[var(--text-muted)] italic">Nothing added yet.</p>
                    )}
                </div>
            </div>

        </div>

    </main>

    <Footer />
</BaseLayout>
